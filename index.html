<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="style.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://code.jquery.com/ui/1.13.2/jquery-ui.js"></script>
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.13.2/themes/smoothness/jquery-ui.css">
</head>
<body>
    <div id="left-column">
        <!-- Eyes -->
        <div class="category">Eyes</div>
        <img src="images/eyes_01.png" class="draggable eyes"/>
        <img src="images/eyes_02.png" class="draggable eyes"/>
        <img src="images/eyes_3.png" class="draggable eyes"/>
        <img src="images/eyes_04.png" class="draggable eyes"/>
        <img src="images/eyes_05.png" class="draggable eyes"/>
        <img src="images/eyes_06.png" class="draggable eyes"/>
        <img src="images/eyes_07.png" class="draggable eyes"/>
        <img src="images/eyes_08.png" class="draggable eyes"/>

        <!-- Facial Hair -->
        <div class="category">Facial Hair</div>
        <img src="images/face-hair_01.png" class="draggable face-hair"/>
        <img src="images/face-hair_02.png" class="draggable face-hair"/>
        <img src="images/face-hair_03.png" class="draggable face-hair"/>
        <img src="images/face-hair_04.png" class="draggable face-hair"/>
        <img src="images/face-hair_05.png" class="draggable face-hair"/>
       
        <!-- Glasses -->
        <div class="category">Glasses</div>
        <img src="images/glasses_01.png" class="draggable glasses"/>
        <img src="images/glasses_02.png" class="draggable glasses"/>
        <img src="images/glasses_03.png" class="draggable glasses"/>
        <img src="images/glasses_04.png" class="draggable glasses"/>
        <img src="images/glasses_05.png" class="draggable glasses"/>
       
        <!-- Mouth -->
        <div class="category">Mouth</div>
        <img src="images/mouth_01.png" class="draggable mouth"/>
        <img src="images/mouth_02.png" class="draggable mouth"/>
        <img src="images/mouth_03.png" class="draggable mouth"/>
        <img src="images/mouth_04.png" class="draggable mouth"/>
        <img src="images/mouth_05.png" class="draggable mouth"/>
        <img src="images/mouth_06.png" class="draggable mouth"/>
        <img src="images/mouth_07.png" class="draggable mouth"/>
        <img src="images/mouth_08.png" class="draggable mouth"/>
       
        <!-- Shoes -->
        <div class="category">Shoes</div>
        <img src="images/shoe_01_L.png" class="draggable shoes"/>
        <img src="images/shoe_01_R.png" class="draggable shoes"/>
        <img src="images/shoe_02_L.png" class="draggable shoes"/>
        <img src="images/shoe_02_R.png" class="draggable shoes"/>
       
        <!-- Pants -->
        <div class="category">Pants</div>
        <img src="images/pants_01.png" class="draggable pants"/>
        <img src="images/pants_02.png" class="draggable pants"/>
        <img src="images/pants_03.png" class="draggable pants"/>
        <img src="images/pants_04.png" class="draggable pants"/>
        <img src="images/pants_05.png" class="draggable pants"/>
       
        <!-- Hair -->
        <div class="category">Hair</div>
        <img src="images/hair_01.png" class="draggable hair"/>
        <img src="images/hair_02.png" class="draggable hair"/>
        <img src="images/hair_03.png" class="draggable hair"/>
        <img src="images/hair_04.png" class="draggable hair"/>
        <img src="images/hair_05.png" class="draggable hair"/>
        <img src="images/hair_06.png" class="draggable hair"/>
    </div>
    
    <div id="right-column">
        <div id="stickman-area">
            <img src="images/stickman.png" id="stickman">
        </div>
        <img src="images/logo.png" id="logo">
    </div>

    <script>
    $(function() {
        console.log("Initializing draggable items...");
        
        // Make all draggable items
        $('.draggable').draggable({
            cursor: 'move',
            zIndex: 1000,
            containment: 'document',
            helper: 'clone',
            revert: 'invalid',
            start: function(event, ui) {
                $(ui.helper).css('opacity', '0.7');
            }
        });
        
        // Make the stickman area a droppable target
        $('#stickman-area').droppable({
            accept: '.draggable',
            drop: function(event, ui) {
                var draggedImg = ui.draggable.attr('src');
                var className = ui.draggable.attr('class');
                var newImg = $('<img>').attr('src', draggedImg).addClass('placed-item');
                
                // Get drop position relative to stickman area
                var stickmanArea = $(this);
                var offset = stickmanArea.offset();
                var left = ui.position.left - offset.left;
                var top = ui.position.top - offset.top;
                
                // Auto-position based on item type
                var finalPosition = autoPositionItem(className, left, top);
                
                newImg.css({
                    'position': 'absolute',
                    'left': finalPosition.left + 'px',
                    'top': finalPosition.top + 'px',
                    'width': '80px',
                    'z-index': getZIndex(className),
                    'pointer-events': 'none'
                });
                
                stickmanArea.append(newImg);
                console.log("Item placed on stickman!");
            },
            over: function(event, ui) {
                $(this).addClass('drop-hover');
            },
            out: function(event, ui) {
                $(this).removeClass('drop-hover');
            }
        });
        
        // Auto-position items based on type
        function autoPositionItem(className, dropLeft, dropTop) {
            var stickmanArea = $('#stickman-area');
            var areaWidth = stickmanArea.width();
            var areaHeight = stickmanArea.height();
            
            // Default positions for different item types
            var positions = {
                'eyes': { left: areaWidth/2 - 40, top: areaHeight/3 - 20 },
                'mouth': { left: areaWidth/2 - 40, top: areaHeight/2 - 10 },
                'hair': { left: areaWidth/2 - 40, top: areaHeight/4 - 30 },
                'glasses': { left: areaWidth/2 - 40, top: areaHeight/3 - 20 },
                'face-hair': { left: areaWidth/2 - 40, top: areaHeight/2 + 20 },
                'pants': { left: areaWidth/2 - 40, top: areaHeight/1.5 - 20 },
                'shoes': { left: areaWidth/2 - 40, top: areaHeight/1.2 - 20 }
            };
            
            // Return drop position or auto-position
            return { left: dropLeft, top: dropTop }; // Use actual drop position
        }
        
        function getZIndex(className) {
            var zIndexes = {
                'hair': 20,
                'glasses': 15,
                'eyes': 10,
                'face-hair': 8,
                'mouth': 5,
                'pants': 3,
                'shoes': 1
            };
            
            for (var type in zIndexes) {
                if (className.includes(type)) {
                    return zIndexes[type];
                }
            }
            return 10;
        }
    });
    </script>
</body>
</html>
